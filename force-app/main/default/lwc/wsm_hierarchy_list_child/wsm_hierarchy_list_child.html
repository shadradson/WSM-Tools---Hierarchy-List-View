<template>
    <div class="card-outer" role="treeitem" aria-label={ariaLabel} aria-expanded={ariaExpanded} tabindex="0" onkeydown={handleKeyDown}>

            <div class="card-header" onclick={handleRecordClick} role="button" aria-label="View record details">

                <template if:true={hasChildren}>
                    <lightning-button-icon icon-name={expandIcon} onclick={handleToggleExpand} alternative-text={toggleButtonLabel} title={toggleButtonLabel} class="expand-button">
                    </lightning-button-icon>
                </template>

                <div class="field-container">
                    <lightning-record-view-form object-api-name={incSettings.objectApiName} record-id={incRecord.Id}>
                        <template for:each={displayFields} for:item="field">
                            <div key={field} class="field-item">
                                <lightning-output-field field-name={field}> </lightning-output-field>
                            </div>
                        </template>
                    </lightning-record-view-form>
                </div>
            </div>

        <template if:true={isExpanded}>
            <template if:true={hasChildren}>
                <div class="children-container" role="group">
                    <template for:each={incRecord.children} for:item="child">
                        <c-wsm_hierarchy_list_child key={child.Id} inc-record={child} inc-settings={childSettings}>
                        </c-wsm_hierarchy_list_child>
                    </template>
                </div>
            </template>
        </template>
    </div>
</template>